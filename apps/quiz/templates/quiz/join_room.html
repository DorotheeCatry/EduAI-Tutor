{% extends 'base.html' %}

{% block title %}Join Room - EduAI Tutor{% endblock %}

{% block content %}
<div class="p-6 space-y-6 h-full overflow-y-auto">
    <div class="flex items-center space-x-3 mb-6">
        <i data-lucide="users" class="w-6 h-6 text-purple-500"></i>
        <h1 class="text-xl font-bold text-white">Join Multiplayer Room</h1>
    </div>

    <div class="max-w-md mx-auto">
        <div class="bg-gray-800 rounded-lg p-6 border border-gray-700">
            {% if messages %}
                {% for message in messages %}
                    <div class="mb-4 p-3 rounded-lg {% if message.tags == 'error' %}bg-red-500 bg-opacity-20 border border-red-500 border-opacity-30 text-red-400{% elif message.tags == 'success' %}bg-green-500 bg-opacity-20 border border-green-500 border-opacity-30 text-green-400{% endif %}">
                        {{ message }}
                    </div>
                {% endfor %}
            {% endif %}

            <form method="post" class="space-y-6">
                {% csrf_token %}
                
                <div class="text-center mb-6">
                    <div class="w-16 h-16 bg-purple-500/20 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i data-lucide="hash" class="w-8 h-8 text-purple-500"></i>
                    </div>
                    <h3 class="text-lg font-bold text-white mb-2">Enter Room Code</h3>
                    <p class="text-sm text-gray-400">Ask the host for the 6-character room code</p>
                </div>

                <div>
                    <input
                        type="text"
                        name="room_code"
                        placeholder="ABC123"
                        maxlength="6"
                        class="w-full px-4 py-4 text-center text-2xl font-mono bg-gray-900 border border-gray-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 uppercase tracking-widest"
                        required
                        autocomplete="off"
                    >
                </div>

                <div class="flex items-center justify-between">
                    <a href="{% url 'quiz:lobby' %}" class="px-4 py-2 text-sm bg-gray-700 text-white rounded-lg hover:bg-gray-600 transition-colors">
                        Back to Lobby
                    </a>
                    <button type="submit" class="px-6 py-2 text-sm bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors flex items-center space-x-2">
                        <i data-lucide="log-in" class="w-4 h-4"></i>
                        <span>Join Room</span>
                    </button>
                </div>
            </form>
        </div>

        <!-- Instructions -->
        <div class="mt-6 bg-gray-900 rounded-lg p-4 border border-gray-600">
            <h4 class="text-sm font-bold text-white mb-2 flex items-center space-x-2">
                <i data-lucide="info" class="w-4 h-4 text-blue-500"></i>
                <span>How to Join</span>
            </h4>
            <ul class="text-xs text-gray-400 space-y-1">
                <li>• Get the 6-character room code from the host</li>
                <li>• Enter it above and click "Join Room"</li>
                <li>• Wait in the lobby until the host starts the game</li>
                <li>• Compete for the highest score!</li>
            </ul>
        </div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        if (typeof lucide !== 'undefined') {
            lucide.createIcons();
        }

        // Auto-uppercase and format room code
        const roomCodeInput = document.querySelector('input[name="room_code"]');
        if (roomCodeInput) {
            roomCodeInput.addEventListener('input', function(e) {
                e.target.value = e.target.value.toUpperCase().replace(/[^A-Z0-9]/g, '');
            });
        }
    });
</script>
{% endblock %}