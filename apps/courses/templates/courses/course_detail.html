{% extends 'base.html' %}
{% load static %}

{% block extra_head %}
<!-- Prism.js pour coloration syntaxique -->
<link href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
<script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
<script>
  Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/';
</script>
{% endblock %}

{% block title %}{{ course.title|default:"Cours généré" }} - EduAI Tutor{% endblock %}

{% block content %}
{% include 'courses/course_content.html' with course=course is_saved_course=is_saved_course error=error %}

{% if xp_result %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Afficher la notification XP après génération de cours
    setTimeout(() => {
        showXPGain(
            {{ xp_result.xp_gained }}, 
            '{{ xp_result.activity_type }}',
            {{ xp_result.level_up|yesno:"true,false" }},
            {% if xp_result.level_up %}{{ xp_result.new_level }}{% else %}null{% endif %}
        );
    }, 1000);
});
</script>
{% endif %}
{% endblock %}